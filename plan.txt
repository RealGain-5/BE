=================================================================
Python ëª¨ë¸ í†µí•© ê³„íš - rcp_5th Electron ì•±
=================================================================

í”„ë¡œì íŠ¸ ê°œìš”
-------------
- í”„ë¡œì íŠ¸ëª…: rcp_5th
- ê¸°ìˆ  ìŠ¤íƒ: Electron + TypeScript + React
- ëª©í‘œ: Python ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ì„ Electron ì•±ì— í†µí•©í•˜ì—¬ ì¶”ë¡  ì‹¤í–‰ ë° ê²°ê³¼ ì¶œë ¥

í˜„ì¬ êµ¬ì¡°
---------
rcp_5th/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                  # Electron Main Process (Node.js)
â”‚   â”‚   â”œâ”€â”€ index.ts          # ì§„ì…ì , IPC í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ database/         # SQLite DB ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ services/         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (auth.js)
â”‚   â”œâ”€â”€ preload/              # IPC í†µì‹  ë¸Œë¦¿ì§€
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ renderer/             # React UI (Vite)
â”‚       â””â”€â”€ src/
â”œâ”€â”€ python/                   # í˜„ì¬ ë¹„ì–´ìˆìŒ
â””â”€â”€ resources/               # ì•± ë¦¬ì†ŒìŠ¤

ê¸°ì¡´ ê¸°ëŠ¥:
- ì‚¬ìš©ì ì¸ì¦ (ë¡œê·¸ì¸/íšŒì›ê°€ì…/ì„¸ì…˜)
- SQLite ë°ì´í„°ë² ì´ìŠ¤ ë¡œê¹…
- IPC í†µì‹ ì„ í†µí•œ Main-Renderer í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ 


Python ëª¨ë¸ í†µí•© í›„ ì˜ˆìƒ êµ¬ì¡°
-------------------------------
rcp_5th/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â””â”€â”€ db.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”‚   â””â”€â”€ pythonService.ts      # ğŸ†• Python í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ pythonRunner.ts       # ğŸ†• Python ì‹¤í–‰ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚
â”‚   â”œâ”€â”€ preload/
â”‚   â”‚   â””â”€â”€ index.ts                  # ğŸ”§ Python API ë…¸ì¶œ ì¶”ê°€
â”‚   â”‚
â”‚   â””â”€â”€ renderer/
â”‚       â””â”€â”€ src/
â”‚           â”œâ”€â”€ components/
â”‚           â”‚   â””â”€â”€ ModelInference.jsx # ğŸ†• ëª¨ë¸ ì¶”ë¡  UI ì»´í¬ë„ŒíŠ¸
â”‚           â””â”€â”€ App.jsx               # ğŸ”§ ì»´í¬ë„ŒíŠ¸ í†µí•©
â”‚
â”œâ”€â”€ python/                            # Python ëª¨ë¸ ê´€ë ¨ ì½”ë“œ
â”‚   â”œâ”€â”€ requirements.txt              # ğŸ†• Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ model/                        # ğŸ†• ëª¨ë¸ íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ trained_model.pth         # í•™ìŠµëœ ëª¨ë¸ ê°€ì¤‘ì¹˜
â”‚   â”‚   â”œâ”€â”€ model_config.json         # ëª¨ë¸ ì„¤ì •
â”‚   â”‚   â””â”€â”€ preprocessor.pkl          # ì „ì²˜ë¦¬ê¸° (ì˜µì…˜)
â”‚   â”‚
â”‚   â”œâ”€â”€ inference.py                  # ğŸ†• ì¶”ë¡  ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ model_loader.py               # ğŸ†• ëª¨ë¸ ë¡œë“œ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ preprocess.py                 # ğŸ†• ë°ì´í„° ì „ì²˜ë¦¬
â”‚   â””â”€â”€ utils.py                      # ğŸ†• ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚
â””â”€â”€ resources/
    â””â”€â”€ python-runtime/               # ğŸ†• (ì˜µì…˜) ë²ˆë“¤ëœ Python ëŸ°íƒ€ì„


ì£¼ìš” êµ¬í˜„ íŒŒì¼ ì—­í• 
-------------------

1. Python ì¸¡ (python/)

   inference.py
   - Python ì¶”ë¡ ì˜ ì§„ì…ì 
   - stdinìœ¼ë¡œ ì…ë ¥ ë°ì´í„° ìˆ˜ì‹  (JSON)
   - ëª¨ë¸ ì¶”ë¡  ì‹¤í–‰
   - stdoutìœ¼ë¡œ ê²°ê³¼ ì¶œë ¥ (JSON)

   model_loader.py
   - PyTorch/TensorFlow ëª¨ë¸ ë¡œë“œ
   - ëª¨ë¸ ê°€ì¤‘ì¹˜ ë¡œë“œ
   - ëª¨ë¸ ì´ˆê¸°í™”

   preprocess.py
   - ì…ë ¥ ë°ì´í„° ì „ì²˜ë¦¬
   - ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•, ì •ê·œí™”
   - í…ì„œ ë³€í™˜

   requirements.txt
   - torch>=2.0.0
   - numpy>=1.24.0
   - pillow>=10.0.0

2. Electron Main Process (src/main/)

   pythonRunner.ts
   - child_process.spawnìœ¼ë¡œ Python í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
   - Pythonê³¼ stdio í†µì‹  (stdin/stdout)
   - í”„ë¡œì„¸ìŠ¤ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬

   pythonService.ts
   - ëª¨ë¸ ì¶”ë¡  ìš”ì²­ ê´€ë¦¬
   - ìš”ì²­ íì‰
   - íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
   - ì—ëŸ¬ í•¸ë“¤ë§

   index.ts (ìˆ˜ì •)
   - IPC í•¸ë“¤ëŸ¬ ì¶”ê°€: 'model-inference'

3. Preload (src/preload/index.ts)

   - Python ì¶”ë¡  APIë¥¼ rendererì— ë…¸ì¶œ
   - runInference: (inputData) => ipcRenderer.invoke('model-inference', inputData)

4. Renderer (src/renderer/)

   ModelInference.jsx
   - íŒŒì¼ ì—…ë¡œë“œ UI
   - ì¶”ë¡  ì‹¤í–‰ ë²„íŠ¼
   - ë¡œë”© ìƒíƒœ í‘œì‹œ
   - ê²°ê³¼ ì‹œê°í™”


í†µì‹  íë¦„
---------
[React UI]
    â†“ (window.api.runInference)
[Preload Script]
    â†“ (IPC: model-inference)
[Main Process - pythonService]
    â†“ (spawn Python process)
[Python Script - inference.py]
    â†“ (stdout: JSON result)
[Main Process]
    â†“ (IPC response)
[React UI] (ê²°ê³¼ í‘œì‹œ)


êµ¬í˜„ ë‹¨ê³„
---------

Phase 1: Python ì¶”ë¡  ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
1. python/inference.py ì‘ì„± (stdin/stdout í†µì‹ )
2. python/model_loader.py ì‘ì„± (ëª¨ë¸ ë¡œë“œ)
3. python/preprocess.py ì‘ì„± (ì „ì²˜ë¦¬)
4. python/requirements.txt ì‘ì„±
5. Python ìŠ¤í¬ë¦½íŠ¸ ë‹¨ë… í…ŒìŠ¤íŠ¸

Phase 2: Electron-Python í†µì‹  êµ¬í˜„
1. src/main/utils/pythonRunner.ts ì‘ì„±
2. src/main/services/pythonService.ts ì‘ì„±
3. src/main/index.tsì— IPC í•¸ë“¤ëŸ¬ ì¶”ê°€
4. src/preload/index.tsì— API ë…¸ì¶œ
5. Main Processì—ì„œ Python í†µì‹  í…ŒìŠ¤íŠ¸

Phase 3: UI ì»´í¬ë„ŒíŠ¸ ì‘ì„±
1. src/renderer/src/components/ModelInference.jsx ì‘ì„±
2. src/renderer/src/App.jsxì— ì»´í¬ë„ŒíŠ¸ í†µí•©
3. íŒŒì¼ ì—…ë¡œë“œ ë° ê²°ê³¼ í‘œì‹œ UI êµ¬í˜„
4. End-to-end í…ŒìŠ¤íŠ¸

Phase 4: ìµœì í™” ë° ì—ëŸ¬ í•¸ë“¤ë§
1. ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
2. ë¡œë”© ìƒíƒœ ë° í”„ë¡œê·¸ë ˆìŠ¤ë°”
3. ì¶”ë¡  ê²°ê³¼ ìºì‹±
4. íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
5. ë¡œê¹… ë° ë””ë²„ê¹…


ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­
---------------

Python ì‹¤í–‰ ë°©ì‹:
- ê°œë°œ í™˜ê²½: ì‹œìŠ¤í…œ Python + virtualenv
- í”„ë¡œë•ì…˜: PyInstallerë¡œ ì‹¤í–‰ íŒŒì¼ ìƒì„± ë˜ëŠ” Python ëŸ°íƒ€ì„ ë²ˆë“¤ë§

ë°ì´í„° ì „ì†¡ ë°©ì‹:
- JSON over stdio: ê°„ë‹¨í•˜ê³  ì•ˆì •ì 
- ëŒ€ìš©ëŸ‰ ë°ì´í„°: ì„ì‹œ íŒŒì¼ ì‚¬ìš© ë˜ëŠ” Base64 ì¸ì½”ë”©

ì—ëŸ¬ ì²˜ë¦¬:
- Python stderr ìº¡ì²˜ ë° ë¡œê¹…
- í”„ë¡œì„¸ìŠ¤ í¬ë˜ì‹œ ê°ì§€ ë° ì¬ì‹œì‘
- íƒ€ì„ì•„ì›ƒ ì„¤ì •

ë³´ì•ˆ:
- Python ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ ê²€ì¦
- ì…ë ¥ ë°ì´í„° ê²€ì¦
- ìƒŒë“œë°•ìŠ¤ í™˜ê²½ ê³ ë ¤


ë‹¤ìŒ ì•¡ì…˜ ì•„ì´í…œ
----------------
1. Python ì¶”ë¡  ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
2. Electron-Python í†µì‹  êµ¬í˜„
3. UI ì»´í¬ë„ŒíŠ¸ ì‘ì„±

=================================================================
